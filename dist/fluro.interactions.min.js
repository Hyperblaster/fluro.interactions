angular.module("fluro.interactions",["fluro.util","fluro.content","fluro.validate"]),angular.module("fluro.interactions").service("FluroInteraction",["Fluro","FluroContent",function(Fluro,FluroContent){var controller={};return controller.interact=function(title,key,interactionData,payment,event,params){var submission={};submission.title=title,submission.key=key,event&&event.length&&(submission.event=event),payment&&(submission.payment=payment),interactionData._contact?submission.contact=interactionData._contact:submission.contact={},interactionData._contacts?submission.contacts=interactionData._contacts:submission.contacts=[],interactionData._firstName&&(submission.contact.firstName=interactionData._firstName),interactionData._lastName&&(submission.contact.lastName=interactionData._lastName),interactionData._email&&(submission.contact.emails=[interactionData._email]),interactionData._emails&&(submission.contact.emails=interactionData._emails),interactionData._phoneNumber&&(submission.contact.phoneNumbers=[interactionData._phoneNumber]),interactionData._phoneNumbers&&(submission.contact.phoneNumbers=interactionData._phoneNumbers),interactionData._dob&&(submission.contact.dob=interactionData._dob),interactionData._gender&&(submission.contact.gender=interactionData._gender),submission.interaction=interactionData,params||(params={});var url="interact/"+key,queryParams=_.map(params,function(v,k){return encodeURIComponent(k)+"="+encodeURIComponent(v)}).join("&");return queryParams.length&&(url+="?"+queryParams),FluroContent.endpoint(url).save(submission).$promise},controller}]);